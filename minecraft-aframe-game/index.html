<html><head><script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
crossorigin="anonymous"></script><script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script><script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script><script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
<script src="https://rawgit.com/protyze/aframe-asset-on-demand-component/master/dist/aframe-asset-on-demand-component.min.js"></script><script src="https://rawgit.com/Utopiah/aframe-persist-component/master/aframe-persist-component.js"></script>
</head><body><div class="canvas"></div><script src="//projects.codewizardshq.com/wizardlib/vr.js"></script><script>


    start();
    var totalBlocks = loadNumber('block-count', 10);
    var pos = randomPosition();
    var health = loadNumber('health-count', 10);
    var selectedTool = loadText('tool', 'block');
    var blockColor = randomColor();
var colorTool = addPillar({
 size: 0.2,
 position: '5 0 -10',
 color: blockColor
});

  theme('forest');

    var blockText = addText({
      text: "Blocks:" + totalBlocks,
      fixed: true,
      color: 'black',
      position: '-1.4 0.7 -1',
      size: 1
    });

    var floor = addFloor({
      width:50,
      height: 50,
      color: 'brown',
      opacity: 0,
      clickSound: 'sounds/villager.mp3'
    });

    var heading = addText({
      text: "Wizardcraft",
      fixed: true,
      color: 'firebrick',
      position: '-0.2 0.7 -1',
      size: 2
    });

    var sphere = addSphere({
      size: 0.5,
      position: '5 0 -10',
      color: 'red'
    });

    var steve = addModel({
      file: 'models/model.gltf',
      position: pos
    });

    var steveSound = addSound({
      file: 'sounds/minecraft.mp3',
      position: pos,
      loop: true
    });

    var burger = addModel({
      file: 'models/Hamburger.gltf',
      position: randomPosition(20),
      scale: 0.1
    });

    var healthText = addText({
      text: "Health:" + health,
      fixed: true,
      color: 'black',
      position: '1.2 0.7 -1',
      size: 1
    });

    var shovelTool = addImage({
      file:'images/shovel.png',
      position: '2 5 -3'
    });

    var blockTool = addBox({
      color: 'red',
      size: 0.5,
      position: '-2 5 -3'
    });

    var rotateTool = addBox({
      color: 'blue',
      size: 0.5,
      position: '-4 5 -3'
    })
    rotate(rotateTool);
    
    hide(steve);

    glide({
      element: heading,
      from: '-0.2 0.7 -1',
      to: '-0.2 1 -1',
      time: 5
    });

    if (selectedTool == 'block') {
      setCursor(blockTool);
    } else if(selectedTool == 'shovel') {
      setCursor(shovelTool);
    } else if(selectedTool == 'rotate') {
      setCursor(rotateTool);
    }

    function block(info) {
      if (totalBlocks > 0) {
        hide(steve);
        if (health > 0) {
          totalBlocks = totalBlocks - 1;
          updateText(blockText, "Blocks:" + totalBlocks);
          save('block-count', totalBlocks);
          var pos = info.point;
          var myColor = randomColor();
          var box = addBox({
            size: 0.5,
            color: blockColor,
            position: pos,
            clickSound: 'sounds/villager.mp3',
            snap: true,
            save: true,
            file: 'images/silver.jpg'
          });
          click(box, checkTool);
        } else {
          updateText(blockText, "Regain your health to add blocks");
        }
      } else {
        show(steve);
        play(steveSound);
      }
    }

    function checkTool(info){
      if (selectedTool == 'block') {
        block(info);
      } else if (selectedTool == 'shovel') {
        deleteBlock(info);
      } else if (selectedTool == 'rotate') {
        rotateBlock(info);
      }
    }

    function deleteBlock(info) {
      if(info.name == 'box') {
        vanish(info.element);
        totalBlocks = totalBlocks + 1;
        save('block-count', totalBlocks);
        updateText(blockText, "Blocks:" + totalBlocks); 
      }
    }

    function rotateBlock(info) {
      if (info.name == 'box') {
        rotate(info.element);
      }
    }


    function getBlocks(info) {
      totalBlocks = totalBlocks + 10;
      save('block-count', totalBlocks);
      var randomPos = randomPosition(60);
      changePosition(steve, randomPos);
      changePosition(steveSound, randomPos);
      hide(steve);
      pause(steveSound);
      updateText(blockText, "Blocks:" + totalBlocks);
    }

    function changeTheme() {
      theme('volcano');
    }

    function decreaseHealth() {
      if(health > 0) {
        health = health - 1;
        save('health-count', health);
        updateText(healthText, "Health: " + health);
      }
    }

    function increaseHealth() {
      hideFood();
      health = health + 1;
      save('health-count', health);
      updateText(healthText, "Health: " + health);
    }

    function hideFood() {
      hide(burger);
      var burgerPos = randomPosition(10);
      changePosition(burger, burgerPos);
    }

    
    function showFood() {
      show(burger);
    }

 
    function selectShovel(info) {
      selectedTool = 'shovel';
      save('tool', selectedTool);
      setCursor(info.element);
    }

    
    function selectBlock(info) {
      selectedTool = 'block';
      save('tool', selectedTool);
      setCursor(info.element);
    }

 
    function selectRotate(info) {
      selectedTool = 'rotate';
      save('tool', selectedTool);
      setCursor(info.element);
    }

    click(floor, checkTool);
    click(sphere, changeTheme);
    click(steve, getBlocks);
    click(burger, increaseHealth);
    click(shovelTool, selectShovel);
    click(blockTool, selectBlock);
    click(rotateTool, selectRotate);

    run({
      action: hideFood, 
      seconds: 10,
      repeat: 'forever'
    });

    run({
      action: showFood,
      seconds: 30,
      repeat: 'forever'
    });

    run({
      action: decreaseHealth,
      minutes: 1,
      repeat: 'forever'
    });

    showBlocks();
  
  function changeColor () {
  blockColor = randomColor();
  updateColor(colorTool, blockColor);  
 } 
 
  var colorText = addText({
 text: 'Change color here',
 position: '3.1 6 -10',
 size: 10
});   
 
  
   click(colorTool, changeColor);
</script></body></html>

